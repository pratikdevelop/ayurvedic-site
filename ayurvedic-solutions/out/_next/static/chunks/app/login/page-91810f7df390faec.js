(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{915:(e,t,a)=>{Promise.resolve().then(a.bind(a,8007))},6210:(e,t,a)=>{"use strict";a.d(t,{Ex:()=>r,gf:()=>n,v$:()=>i});let r=(e,t)=>{localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",t)},o=()=>localStorage.getItem("access_token"),s=()=>localStorage.getItem("refresh_token"),n=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")},l=async()=>{let e=s();if(!e)throw Error("No refresh token available");let t=await fetch("http://localhost:5000/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:e})});if(!t.ok)throw Error("Failed to refresh token");let a=await t.json();return r(a.access,e),a.access},i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=o(),r={...t.headers,"Content-Type":"application/json"};a&&(r.Authorization="Bearer ".concat(a));try{let o=await fetch(e,{...t,headers:r});return 401===o.status&&a&&(a=await l(),r.Authorization="Bearer ".concat(a),o=await fetch(e,{...t,headers:r})),o}catch(e){throw console.error("Fetch error:",e),e}}},8007:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var r=a(5155),o=a(2115),s=a(5695),n=a(7217),l=a(700),i=a(2302),c=a(4581),h=a(3731),u=a(8534),d=a(6210),m=a(6874),f=a.n(m);function g(){let[e,t]=(0,o.useState)(""),[a,m]=(0,o.useState)(""),[g,p]=(0,o.useState)(""),x=(0,s.useRouter)(),v=async t=>{t.preventDefault();try{let t=await fetch("http://localhost:5000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:a})});if(!t.ok)throw Error("Invalid credentials");let r=await t.json();(0,d.Ex)(r.access,r.refresh),x.push("/")}catch(e){p("Login failed: "+e.message)}};return(0,r.jsxs)(n.A,{maxWidth:"sm",sx:{py:8},className:"bg-white border-1 border-slate-100 shadow-slate-200 shadow-2xl",children:[(0,r.jsx)(l.A,{variant:"h4",align:"center",gutterBottom:!0,children:"Login your account"}),g&&(0,r.jsx)(i.A,{severity:"error",sx:{mb:2},children:g}),(0,r.jsxs)(c.A,{component:"form",onSubmit:v,sx:{mt:2},children:[(0,r.jsx)(h.A,{label:"Username",value:e,onChange:e=>t(e.target.value),fullWidth:!0,margin:"normal",required:!0}),(0,r.jsx)(h.A,{label:"Password",type:"password",value:a,onChange:e=>m(e.target.value),fullWidth:!0,margin:"normal",required:!0}),(0,r.jsxs)(l.A,{className:"ml-auto text-slate-700",children:["Don't have an account?",(0,r.jsx)(f(),{className:"text-blue-600",href:"/signup",children:" Sign Up"})]}),(0,r.jsx)(u.A,{type:"submit",variant:"contained",sx:{mt:2},fullWidth:!0,children:"Login"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[765,719,698,112,874,441,684,358],()=>t(915)),_N_E=e.O()}]);