(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{4900:(e,t,a)=>{Promise.resolve().then(a.bind(a,6038))},6038:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var r=a(5155),o=a(2115),n=a(5695),s=a(7217),l=a(700),i=a(2302),c=a(4581),h=a(3731),u=a(8534),d=a(6210);function f(){let[e,t]=(0,o.useState)(""),[a,f]=(0,o.useState)(""),[g,m]=(0,o.useState)(""),[p,v]=(0,o.useState)(""),S=(0,n.useRouter)(),y=async t=>{t.preventDefault();try{let t=await fetch("http://localhost:5000/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,email:a,password:g})});if(!t.ok){let e=await t.json();throw Error(e.error||"Signup failed")}let r=await t.json();(0,d.Ex)(r.access,r.refresh),S.push("/")}catch(e){v("Signup failed: "+e.message)}};return(0,r.jsxs)(s.A,{maxWidth:"sm",sx:{py:8},children:[(0,r.jsx)(l.A,{variant:"h4",align:"center",gutterBottom:!0,children:"Sign Up"}),p&&(0,r.jsx)(i.A,{severity:"error",sx:{mb:2},children:p}),(0,r.jsxs)(c.A,{component:"form",onSubmit:y,sx:{mt:2},children:[(0,r.jsx)(h.A,{label:"Username",value:e,onChange:e=>t(e.target.value),fullWidth:!0,margin:"normal",required:!0}),(0,r.jsx)(h.A,{label:"Email",type:"email",value:a,onChange:e=>f(e.target.value),fullWidth:!0,margin:"normal",required:!0}),(0,r.jsx)(h.A,{label:"Password",type:"password",value:g,onChange:e=>m(e.target.value),fullWidth:!0,margin:"normal",required:!0}),(0,r.jsx)(u.A,{type:"submit",variant:"contained",sx:{bgcolor:"#388e3c",mt:2},fullWidth:!0,children:"Sign Up"}),(0,r.jsx)(u.A,{href:"/login",sx:{mt:2},fullWidth:!0,children:"Already have an account? Login"})]})]})}},6210:(e,t,a)=>{"use strict";a.d(t,{Ex:()=>r,gf:()=>s,v$:()=>i});let r=(e,t)=>{localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",t)},o=()=>localStorage.getItem("access_token"),n=()=>localStorage.getItem("refresh_token"),s=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")},l=async()=>{let e=n();if(!e)throw Error("No refresh token available");let t=await fetch("http://localhost:5000/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:e})});if(!t.ok)throw Error("Failed to refresh token");let a=await t.json();return r(a.access,e),a.access},i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=o(),r={...t.headers,"Content-Type":"application/json"};a&&(r.Authorization="Bearer ".concat(a));try{let o=await fetch(e,{...t,headers:r});return 401===o.status&&a&&(a=await l(),r.Authorization="Bearer ".concat(a),o=await fetch(e,{...t,headers:r})),o}catch(e){throw console.error("Fetch error:",e),e}}}},e=>{var t=t=>e(e.s=t);e.O(0,[765,719,698,112,441,684,358],()=>t(4900)),_N_E=e.O()}]);